<sequence xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
		disabled="false"
		id="d707fe49ddd143409920eddb43ec6544"
		lineNumber="1">
	<steps xsi:type="be.nabu.libs.services.vm.step.Map"
			comment="Set strictByDefault &amp; requireInitializer"
			disabled="false"
			id="9dfa3ac2a87c45858ef843a38cb7a810"
			lineNumber="2">
		<steps xsi:type="be.nabu.libs.services.vm.step.Link"
				disabled="false"
				id="dd051af8f78d4d0ea5c23f5509c3a236"
				mask="false"
				optional="false"
				fixedValue="true">
			<from>true</from>
			<to>strictByDefault</to>
		</steps>
		<steps xsi:type="be.nabu.libs.services.vm.step.Link"
				disabled="false"
				id="6b9390cf0cd2444ebd36c01c958a07c4"
				mask="false"
				optional="false"
				fixedValue="true">
			<from>true</from>
			<to>requireInitializer</to>
		</steps>
	</steps>
	<steps xsi:type="be.nabu.libs.services.vm.step.Switch"
			disabled="false"
			id="d1bf471698e04fc6843c79a8b909555d"
			lineNumber="3">
		<steps xsi:type="be.nabu.libs.services.vm.step.Map"
				disabled="false"
				id="c54e358aabdf402e938713e7914df4cc"
				label="input/serviceId != null"
				lineNumber="4">
			<steps xsi:type="be.nabu.libs.services.vm.step.Invoke"
					disabled="false"
					id="bbf06081c8c94b62aec45b1d7ae7e86f"
					serviceId="nabu.frameworks.process.providers.action.service.utils.getPotentialServiceActions"
					resultName="result78a7c5501506441aa923e2e586323d94"
					temporaryMapping="true"
					x="108"
					y="36"
					invocationOrder="0"
					asynchronous="false"
					recache="false">
				<steps xsi:type="be.nabu.libs.services.vm.step.Link"
						disabled="false"
						id="932c79d65a0747e98528c83f61c89c9c"
						mask="false"
						optional="false"
						fixedValue="false">
					<from>input/serviceId</from>
					<to>serviceId</to>
				</steps>
			</steps>
			<steps xsi:type="be.nabu.libs.services.vm.step.Link"
					disabled="false"
					id="d175c10c0f0b4b7b894033ada7674574"
					mask="false"
					optional="false"
					fixedValue="false">
				<from>result78a7c5501506441aa923e2e586323d94/processes</from>
				<to>potentialProcesses</to>
			</steps>
			<steps xsi:type="be.nabu.libs.services.vm.step.Link"
					disabled="false"
					id="573f6eba9964440fa3c77df755d9aa19"
					mask="false"
					optional="false"
					fixedValue="false">
				<from>result78a7c5501506441aa923e2e586323d94/captures</from>
				<to>allCaptures</to>
			</steps>
		</steps>
		<steps xsi:type="be.nabu.libs.services.vm.step.Throw"
				disabled="false"
				id="b6ce3e3697704d8ca5117f86adc819be"
				lineNumber="5"
				message="Can't get potential actions" xsi:nil="true"/>
	</steps>
	<steps xsi:type="be.nabu.libs.services.vm.step.Map"
			disabled="false"
			id="1feb34f48946476ebd014770222064f2"
			label="input/correlationId == null"
			lineNumber="6">
		<steps xsi:type="be.nabu.libs.services.vm.step.Invoke"
				disabled="false"
				id="260a2006a6c14711b68f33d3107c980a"
				serviceId="nabu.utils.Runtime.getCorrelationId"
				resultName="resultfa023529e967449f85b33e578ba3d4aa"
				temporaryMapping="true"
				x="78"
				y="69"
				invocationOrder="0"
				asynchronous="false"
				recache="false">
		</steps>
		<steps xsi:type="be.nabu.libs.services.vm.step.Link"
				disabled="false"
				id="2e1c23fec079419e929a08814bae4f1c"
				mask="false"
				optional="false"
				fixedValue="false">
			<from>resultfa023529e967449f85b33e578ba3d4aa/correlationId</from>
			<to>input/correlationId</to>
		</steps>
	</steps>
	<steps xsi:type="be.nabu.libs.services.vm.step.Map"
			disabled="false"
			id="e9b113358eb94066a398cba5a72c0b9c"
			label="input/sessionId == null"
			lineNumber="7">
		<steps xsi:type="be.nabu.libs.services.vm.step.Invoke"
				disabled="false"
				id="39e3def3c01a4427b2c86618a5ea9726"
				serviceId="nabu.web.application.Services.getSessionId"
				resultName="resultf54489571a72420a8269a8595a252e2a"
				temporaryMapping="true"
				x="206"
				y="162"
				invocationOrder="0"
				asynchronous="false"
				recache="false">
		</steps>
		<steps xsi:type="be.nabu.libs.services.vm.step.Link"
				disabled="false"
				id="702cc11f19794ab4a87e403356114382"
				mask="false"
				optional="false"
				fixedValue="false">
			<from>resultf54489571a72420a8269a8595a252e2a/sessionId</from>
			<to>input/sessionId</to>
		</steps>
	</steps>
	<steps xsi:type="be.nabu.libs.services.vm.step.Map"
			disabled="false"
			id="391b7bb837ed436aaebf467ed737f87e"
			lineNumber="8">
		<steps xsi:type="be.nabu.libs.services.vm.step.Invoke"
				disabled="false"
				id="eec6fd4ced1f461baaeed24ef025e0af"
				serviceId="nabu.utils.String.split"
				resultName="result0512353c1cc04863ae9f934d38f024bc"
				temporaryMapping="true"
				x="186"
				y="199"
				invocationOrder="0"
				asynchronous="false"
				recache="false">
			<steps xsi:type="be.nabu.libs.services.vm.step.Link"
					disabled="false"
					id="d8cc0d83c76549958a280ca07cccf648"
					mask="false"
					optional="false"
					fixedValue="true">
				<from>RUNNING,ERROR</from>
				<to>string</to>
			</steps>
			<steps xsi:type="be.nabu.libs.services.vm.step.Link"
					disabled="false"
					id="d54a708fa241462f9dbf889bbcf1eb5c"
					mask="false"
					optional="false"
					fixedValue="true">
				<from>,</from>
				<to>separator</to>
			</steps>
		</steps>
		<steps xsi:type="be.nabu.libs.services.vm.step.Link"
				disabled="false"
				id="63c36404b47b40da8f32f855b8284d05"
				mask="false"
				optional="false"
				fixedValue="false">
			<from>result0512353c1cc04863ae9f934d38f024bc/parts</from>
			<to>processStates</to>
		</steps>
		<steps xsi:type="be.nabu.libs.services.vm.step.Invoke"
				disabled="false"
				id="cf0b3d196ce14e95aa377dc05c471d3d"
				serviceId="nabu.utils.String.split"
				resultName="resultcfe636d1c1274c4aa11386097eeca7bf"
				temporaryMapping="true"
				x="191"
				y="338"
				invocationOrder="0"
				asynchronous="false"
				recache="false">
			<steps xsi:type="be.nabu.libs.services.vm.step.Link"
					disabled="false"
					id="91af9b43e2fe41f8a56de6c5e40631a7"
					mask="false"
					optional="false"
					fixedValue="true">
				<from>RUNNING,ERROR,SUCCEEDED,FAILED</from>
				<to>string</to>
			</steps>
			<steps xsi:type="be.nabu.libs.services.vm.step.Link"
					disabled="false"
					id="49850ded2596461798d663a780434efd"
					mask="false"
					optional="false"
					fixedValue="true">
				<from>,</from>
				<to>separator</to>
			</steps>
		</steps>
		<steps xsi:type="be.nabu.libs.services.vm.step.Link"
				disabled="false"
				id="0eacba6c4d264638ad1403d75975a0ce"
				mask="false"
				optional="false"
				fixedValue="false">
			<from>resultcfe636d1c1274c4aa11386097eeca7bf/parts</from>
			<to>actionStates</to>
		</steps>
		<steps xsi:type="be.nabu.libs.services.vm.step.Link"
				disabled="false"
				id="7b7e2eb1e1cb44bd848848c263667814"
				mask="false"
				optional="false"
				fixedValue="false">
			<from>allCaptures[capture ~ "^=input/.*" || phase == "input"]</from>
			<to>inputCaptures</to>
		</steps>
	</steps>
	<steps xsi:type="be.nabu.libs.services.vm.step.Map"
			disabled="false"
			id="6eeef6aa9d0a4c81959266073840106c"
			lineNumber="9">
		<steps xsi:type="be.nabu.libs.services.vm.step.Invoke"
				disabled="false"
				id="bbec5c617c784191b500f2f3e0c91e0b"
				serviceId="nabu.utils.Runtime.getPipeline"
				resultName="result39c412f4c96d4d6b99d924c7b33b77e0"
				temporaryMapping="true"
				x="83"
				y="54"
				invocationOrder="0"
				asynchronous="false"
				recache="false">
			<steps xsi:type="be.nabu.libs.services.vm.step.Link"
					disabled="false"
					id="2de3cbfe6c294348b4194ad1694fa557"
					mask="false"
					optional="false"
					fixedValue="false">
				<from>input/serviceId</from>
				<to>serviceId</to>
			</steps>
		</steps>
		<steps xsi:type="be.nabu.libs.services.vm.step.Link"
				disabled="false"
				id="dfd547d87fe545b587f5dacffcd69cf7"
				mask="false"
				optional="false"
				fixedValue="false">
			<from>result39c412f4c96d4d6b99d924c7b33b77e0/pipeline</from>
			<to>pipeline</to>
		</steps>
	</steps>
	<steps xsi:type="be.nabu.libs.services.vm.step.Sequence"
			disabled="false"
			id="7def2e4e6d4b4ed2933c9fc50fee5fac"
			label="inputCaptures"
			lineNumber="10">
		<steps xsi:type="be.nabu.libs.services.vm.step.For"
				comment="Resolve all input captures if we have any input"
				disabled="false"
				id="0077d501ad594d59b9c29778a23fd89e"
				label="pipeline"
				lineNumber="11"
				variable="singleCapture">
			<steps xsi:type="be.nabu.libs.services.vm.step.Map"
					disabled="false"
					id="ed0cd407303a47edb8db19b45b693b51"
					lineNumber="12">
				<steps xsi:type="be.nabu.libs.services.vm.step.Invoke"
						disabled="false"
						id="6ad8abc62aa143b9bec5fa2477c04ef5"
						serviceId="nabu.services.glue.Services.evaluate"
						resultName="result9e88f29b63c844758b5b0de9cbd6c89f"
						temporaryMapping="true"
						x="496"
						y="104"
						invocationOrder="1"
						asynchronous="false"
						recache="false">
					<steps xsi:type="be.nabu.libs.services.vm.step.Link"
							disabled="false"
							id="a3f7f731351740d7b6ab4991419a83f8"
							mask="false"
							optional="false"
							fixedValue="false">
						<from>pipeline</from>
						<to>context[0]</to>
					</steps>
					<steps xsi:type="be.nabu.libs.services.vm.step.Link"
							disabled="false"
							id="5229629cda6545e38e58be7a0e8129e5"
							mask="false"
							optional="false"
							fixedValue="false">
						<from>result0aa07fe13be54f9e896da1ac0ef54311/substring</from>
						<to>rule</to>
					</steps>
				</steps>
				<steps xsi:type="be.nabu.libs.services.vm.step.Link"
						disabled="false"
						id="86f2e3db737d4422abe57289664bd80b"
						mask="false"
						optional="false"
						fixedValue="false">
					<from>result9e88f29b63c844758b5b0de9cbd6c89f/response</from>
					<to>singleCapture/value</to>
				</steps>
				<steps xsi:type="be.nabu.libs.services.vm.step.Invoke"
						disabled="false"
						id="d0177a176ce44024a1f953a833d90940"
						serviceId="nabu.utils.String.substring"
						resultName="result0aa07fe13be54f9e896da1ac0ef54311"
						temporaryMapping="true"
						x="132"
						y="48"
						invocationOrder="0"
						asynchronous="false"
						recache="false">
					<steps xsi:type="be.nabu.libs.services.vm.step.Link"
							disabled="false"
							id="4141747dde4e4057b4d16e1153bcbd5b"
							mask="false"
							optional="false"
							fixedValue="false">
						<from>singleCapture/capture</from>
						<to>string</to>
					</steps>
					<steps xsi:type="be.nabu.libs.services.vm.step.Link"
							disabled="false"
							id="e7561fbe639945579796d9adc0492bb1"
							mask="false"
							optional="false"
							fixedValue="true">
						<from>1</from>
						<to>start</to>
					</steps>
				</steps>
			</steps>
			<query>inputCaptures</query>
		</steps>
	</steps>
	<steps xsi:type="be.nabu.libs.services.vm.step.For"
			disabled="false"
			id="ad051b36afb14665a746633df900c3b1"
			lineNumber="13"
			variable="potentialProcess"
			into="output/actionsToRun">
		<steps xsi:type="be.nabu.libs.services.vm.step.Map"
				comment="Cleanup"
				disabled="false"
				id="15fbbcdec5124c12b6387fee56ab5f18"
				lineNumber="14">
			<steps xsi:type="be.nabu.libs.services.vm.step.Drop"
					disabled="false"
					id="214cf026a0e549f280265e56a5c8503a"
					path="identifierValues" xsi:nil="true"/>
			<steps xsi:type="be.nabu.libs.services.vm.step.Drop"
					disabled="false"
					id="24dd85c0f05341eeadafe7ba9303518c"
					path="identificationTypes" xsi:nil="true"/>
			<steps xsi:type="be.nabu.libs.services.vm.step.Drop"
					disabled="false"
					id="7da3ea8761a24550a9021e71bd199e10"
					path="activatedRelations" xsi:nil="true"/>
		</steps>
		<steps xsi:type="be.nabu.libs.services.vm.step.Map"
				disabled="false"
				id="3d84094187aa409cb9d92cd255ac6950"
				lineNumber="15">
			<steps xsi:type="be.nabu.libs.services.vm.step.Invoke"
					disabled="false"
					id="0e1fb20d1a104d4ba400144dc0e85e92"
					serviceId="nabu.frameworks.process.providers.action.service.utils.tracker.filterConditionedActions"
					resultName="result0f0d75c653ca4940b68a70cce151e5ed"
					temporaryMapping="true"
					x="214"
					y="73"
					invocationOrder="0"
					asynchronous="false"
					recache="false">
				<steps xsi:type="be.nabu.libs.services.vm.step.Link"
						disabled="false"
						id="73fa835f92ce40008a0e93e02f1a0395"
						mask="false"
						optional="false"
						fixedValue="false">
					<from>potentialProcess/actions</from>
					<to>actions</to>
				</steps>
				<steps xsi:type="be.nabu.libs.services.vm.step.Link"
						disabled="false"
						id="66b27dd88d144ba2a6ff575e35bc4606"
						mask="false"
						optional="false"
						fixedValue="false">
					<from>pipeline</from>
					<to>context</to>
				</steps>
			</steps>
			<steps xsi:type="be.nabu.libs.services.vm.step.Link"
					disabled="false"
					id="d3b0bcd153a742c295f46a73187823e2"
					mask="false"
					optional="false"
					fixedValue="false">
				<from>result0f0d75c653ca4940b68a70cce151e5ed/filteredActions</from>
				<to>filteredActions</to>
			</steps>
			<steps xsi:type="be.nabu.libs.services.vm.step.Link"
					disabled="false"
					id="aa151e2ec1784865922d73bbfb007f26"
					mask="false"
					optional="false"
					fixedValue="true">
				<from>false</from>
				<to>forced</to>
			</steps>
			<steps xsi:type="be.nabu.libs.services.vm.step.Drop"
					disabled="false"
					id="7dd3a1b133d24391b30cb84646ce71ca"
					path="forceStrategy" xsi:nil="true"/>
		</steps>
		<steps xsi:type="be.nabu.libs.services.vm.step.Break"
				disabled="false"
				id="aae7b126722043eba2c9f786b337043f"
				label="!filteredActions"
				lineNumber="16">
			<count>1</count>
			<continueExecution>true</continueExecution>
		</steps>
		<steps xsi:type="be.nabu.libs.services.vm.step.Map"
				comment="Get all unique identification types for the possible actions"
				disabled="false"
				id="b1dafbec62d44062bd0df49ab639dfac"
				lineNumber="17">
			<steps xsi:type="be.nabu.libs.services.vm.step.Invoke"
					disabled="false"
					id="7af8b5f45fb1453fb4821cf88c5d6dc1"
					serviceId="nabu.utils.List.unique"
					resultName="result6a78b7d8576e4004862e24b34da76d92"
					temporaryMapping="true"
					x="235"
					y="122"
					invocationOrder="1"
					asynchronous="false"
					recache="false">
				<steps xsi:type="be.nabu.libs.services.vm.step.Link"
						disabled="false"
						id="fb55ac4829fa4fed90aec7388944a9de"
						mask="false"
						optional="false"
						fixedValue="false">
					<from>filteredActions/identificationType</from>
					<to>list</to>
				</steps>
			</steps>
			<steps xsi:type="be.nabu.libs.services.vm.step.Link"
					disabled="false"
					id="3e32d5439a3f4ad493a35d415d2584a0"
					mask="false"
					optional="false"
					fixedValue="false">
				<from>result6a78b7d8576e4004862e24b34da76d92/list</from>
				<to>identificationTypes</to>
			</steps>
			<steps xsi:type="be.nabu.libs.services.vm.step.Drop"
					disabled="false"
					id="ef3bbcb534e2475696303cec7e1a3982"
					path="matchingActions" xsi:nil="true"/>
		</steps>
		<steps xsi:type="be.nabu.libs.services.vm.step.Map"
				comment="We combine all the captured identifiers for all the possible actions within a process"
				disabled="false"
				id="cb0881eefda14baca355ef781f48294c"
				lineNumber="18">
			<steps xsi:type="be.nabu.libs.services.vm.step.Drop"
					disabled="false"
					id="85bfdef0dfb54987b03cf0663cd4a3e0"
					path="processActionToRun" xsi:nil="true"/>
			<steps xsi:type="be.nabu.libs.services.vm.step.Invoke"
					disabled="false"
					id="99964377056e470abaabafdccc45f2e2"
					serviceId="nabu.utils.List.unique"
					resultName="result7c35b522c5514b51a6356370fafd493a"
					temporaryMapping="true"
					x="94"
					y="97"
					invocationOrder="0"
					asynchronous="false"
					recache="false">
				<steps xsi:type="be.nabu.libs.services.vm.step.Link"
						disabled="false"
						id="087431b7a78748f78a074b3c52f0fc4c"
						mask="false"
						optional="false"
						fixedValue="false">
					<from>filteredActions/captures[identifier == true]/capture</from>
					<to>list</to>
				</steps>
			</steps>
			<steps xsi:type="be.nabu.libs.services.vm.step.Link"
					disabled="false"
					id="f48a9e4b95044f92ab3052e83a0896ff"
					mask="false"
					optional="false"
					fixedValue="false">
				<from>result7c35b522c5514b51a6356370fafd493a/list</from>
				<to>capturesToUse</to>
			</steps>
		</steps>
		<steps xsi:type="be.nabu.libs.services.vm.step.Map"
				disabled="false"
				id="97c5699afc0840c0bba92df2bc880e1c"
				label="&quot;deviceId&quot; # identificationTypes &amp;&amp; input/device/deviceId != null"
				lineNumber="19">
			<steps xsi:type="be.nabu.libs.services.vm.step.Invoke"
					disabled="false"
					id="42548ef1987a4d698bf03ee5e666fc90"
					serviceId="nabu.utils.List.add"
					resultName="resultf6a030a3207b48b0aa3964cba9a948eb"
					temporaryMapping="true"
					x="92"
					y="122"
					invocationOrder="0"
					asynchronous="false"
					recache="false">
				<steps xsi:type="be.nabu.libs.services.vm.step.Link"
						disabled="false"
						id="c1d3f33c763f44079d8ebbc468d24e9f"
						mask="false"
						optional="false"
						fixedValue="false">
					<from>identifierValues</from>
					<to>list</to>
				</steps>
				<steps xsi:type="be.nabu.libs.services.vm.step.Link"
						disabled="false"
						id="6e56a393d7604ceaaaaaa92463aa83ca"
						mask="false"
						optional="false"
						fixedValue="false">
					<from>input/device/deviceId</from>
					<to>object</to>
				</steps>
			</steps>
			<steps xsi:type="be.nabu.libs.services.vm.step.Link"
					disabled="false"
					id="fd1d4dd8754c40baa8fb68418487d1bb"
					mask="false"
					optional="false"
					fixedValue="false">
				<from>resultf6a030a3207b48b0aa3964cba9a948eb/list</from>
				<to>identifierValues</to>
			</steps>
		</steps>
		<steps xsi:type="be.nabu.libs.services.vm.step.Map"
				disabled="false"
				id="03498f8da67f443aac9da121e541ea6c"
				label="&quot;sessionId&quot; # identificationTypes &amp;&amp; input/sessionId != null"
				lineNumber="20">
			<steps xsi:type="be.nabu.libs.services.vm.step.Invoke"
					disabled="false"
					id="770bc83135c74896a65afaf3e919373c"
					serviceId="nabu.utils.List.add"
					resultName="resultf6a030a3207b48b0aa3964cba9a948eb"
					temporaryMapping="true"
					x="92"
					y="122"
					invocationOrder="0"
					asynchronous="false"
					recache="false">
				<steps xsi:type="be.nabu.libs.services.vm.step.Link"
						disabled="false"
						id="8446dfa9c94049ef9cdddb9cba8f26bc"
						mask="false"
						optional="false"
						fixedValue="false">
					<from>identifierValues</from>
					<to>list</to>
				</steps>
				<steps xsi:type="be.nabu.libs.services.vm.step.Link"
						disabled="false"
						id="c53577073b6f45b49cb177b785d45140"
						mask="false"
						optional="false"
						fixedValue="false">
					<from>input/sessionId</from>
					<to>object</to>
				</steps>
			</steps>
			<steps xsi:type="be.nabu.libs.services.vm.step.Link"
					disabled="false"
					id="720cce2919824df984fd0917ddb6dfb6"
					mask="false"
					optional="false"
					fixedValue="false">
				<from>resultf6a030a3207b48b0aa3964cba9a948eb/list</from>
				<to>identifierValues</to>
			</steps>
		</steps>
		<steps xsi:type="be.nabu.libs.services.vm.step.Map"
				disabled="false"
				id="c949c3eaab694879b9ef910d56c330e7"
				label="&quot;userId&quot; # identificationTypes &amp;&amp; input/token/authenticationId != null"
				lineNumber="21">
			<steps xsi:type="be.nabu.libs.services.vm.step.Invoke"
					disabled="false"
					id="936e28be21f0451e972e1c04cac94b92"
					serviceId="nabu.utils.List.add"
					resultName="resultf6a030a3207b48b0aa3964cba9a948eb"
					temporaryMapping="true"
					x="92"
					y="122"
					invocationOrder="0"
					asynchronous="false"
					recache="false">
				<steps xsi:type="be.nabu.libs.services.vm.step.Link"
						disabled="false"
						id="a484f8367f154adf9362b1ab711e8dbb"
						mask="false"
						optional="false"
						fixedValue="false">
					<from>identifierValues</from>
					<to>list</to>
				</steps>
				<steps xsi:type="be.nabu.libs.services.vm.step.Link"
						disabled="false"
						id="575b29a5cd104da1ad3780f0dc1fbc1c"
						mask="false"
						optional="false"
						fixedValue="false">
					<from>input/token/authenticationId</from>
					<to>object</to>
				</steps>
			</steps>
			<steps xsi:type="be.nabu.libs.services.vm.step.Link"
					disabled="false"
					id="3a5f478779f74c2580aa8f29a6f88a13"
					mask="false"
					optional="false"
					fixedValue="false">
				<from>resultf6a030a3207b48b0aa3964cba9a948eb/list</from>
				<to>identifierValues</to>
			</steps>
		</steps>
		<steps xsi:type="be.nabu.libs.services.vm.step.Map"
				comment="If you choose global matches, we dont set any identifiers. Only one instance can be active at a time"
				disabled="false"
				id="908fe80cd4664d1786dbb863141a59ca"
				label="&quot;global&quot; # identificationTypes"
				lineNumber="22">
		</steps>
		<steps xsi:type="be.nabu.libs.services.vm.step.Map"
				comment="If we explicitly look for correlation id or have no other means of identification, fall back to correlationId"
				disabled="false"
				id="ccd56bb07c26466585568a61bbe4a10f"
				label="&quot;correlationId&quot; # identificationTypes || identificationTypes == null"
				lineNumber="23">
			<steps xsi:type="be.nabu.libs.services.vm.step.Invoke"
					disabled="false"
					id="b96289be9a904bffa516aff0ab1f04d1"
					serviceId="nabu.utils.List.add"
					resultName="resultb377b3b8b9b44e2086c00536547af1ca"
					temporaryMapping="true"
					x="198"
					y="275"
					invocationOrder="0"
					asynchronous="false"
					recache="false">
				<steps xsi:type="be.nabu.libs.services.vm.step.Link"
						disabled="false"
						id="a3d1a1f143464d2ba195021e198d9f7c"
						mask="false"
						optional="false"
						fixedValue="false">
					<from>identifierValues</from>
					<to>list</to>
				</steps>
				<steps xsi:type="be.nabu.libs.services.vm.step.Link"
						disabled="false"
						id="06085fb2ef614ac8bff94d17af620656"
						mask="false"
						optional="false"
						fixedValue="false">
					<from>input/correlationId</from>
					<to>object</to>
				</steps>
			</steps>
			<steps xsi:type="be.nabu.libs.services.vm.step.Link"
					disabled="false"
					id="a9306de14de049d0b1f49c8c214fd6f9"
					mask="false"
					optional="false"
					fixedValue="false">
				<from>resultb377b3b8b9b44e2086c00536547af1ca/list</from>
				<to>identifierValues</to>
			</steps>
		</steps>
		<steps xsi:type="be.nabu.libs.services.vm.step.Map"
				disabled="false"
				id="2c15a46518084605ad0f614600061bb5"
				label="capturesToUse != null"
				lineNumber="24">
			<steps xsi:type="be.nabu.libs.services.vm.step.Invoke"
					disabled="false"
					id="333c0af94b6d44c08005eb33c7a3e101"
					serviceId="nabu.utils.List.addAll"
					resultName="result91ed3a517c2a455c8f3c79653c35d16d"
					temporaryMapping="true"
					x="298"
					y="96"
					invocationOrder="0"
					asynchronous="false"
					recache="false">
				<steps xsi:type="be.nabu.libs.services.vm.step.Link"
						disabled="false"
						id="212bec08c15a407e9a397487613d0a31"
						mask="false"
						optional="false"
						fixedValue="false">
					<from>identifierValues</from>
					<to>list</to>
				</steps>
				<steps xsi:type="be.nabu.libs.services.vm.step.Link"
						disabled="false"
						id="e0a9028ae89b4d6a9fe0b9feae6f505e"
						mask="false"
						optional="false"
						fixedValue="false">
					<from>allCaptures[capture # /capturesToUse &amp;&amp; value != null]/value</from>
					<to>objects</to>
				</steps>
			</steps>
			<steps xsi:type="be.nabu.libs.services.vm.step.Link"
					disabled="false"
					id="7aed7de0c09f44398d643a36ccc34f54"
					mask="false"
					optional="false"
					fixedValue="false">
				<from>result91ed3a517c2a455c8f3c79653c35d16d/list</from>
				<to>identifierValues</to>
			</steps>
		</steps>
		<steps xsi:type="be.nabu.libs.services.vm.step.Switch"
				disabled="false"
				id="7dc53e4c5fcd4976877b38598eb39ed0"
				lineNumber="25">
			<steps xsi:type="be.nabu.libs.services.vm.step.Map"
					comment="Only try to find the instances if we have _some_ identifier OR we have explicitly set global"
					disabled="false"
					id="eb6273958a0d4e06bf7108f529f31f2f"
					label="identifierValues != null || &quot;global&quot; # identificationTypes"
					lineNumber="26">
				<steps xsi:type="be.nabu.libs.services.vm.step.Invoke"
						disabled="false"
						id="32bb56129493431b93c1633e049c0526"
						serviceId="nabu.frameworks.process.crud.processData.services.list"
						resultName="result7ea308e4bcd14ef88d2c0d51edf21180"
						temporaryMapping="true"
						x="189"
						y="53"
						invocationOrder="0"
						asynchronous="false"
						recache="false">
					<steps xsi:type="be.nabu.libs.services.vm.step.Link"
							disabled="false"
							id="a1366e1075ba476ba22a9c41b0e9a553"
							mask="false"
							optional="false"
							fixedValue="false">
						<from>processStates</from>
						<to>filter/processState</to>
					</steps>
					<steps xsi:type="be.nabu.libs.services.vm.step.Link"
							disabled="false"
							id="4949c3d0e4a44b418e7a6af75590da08"
							mask="false"
							optional="false"
							fixedValue="true">
						<from>true</from>
						<to>filter/identifier</to>
					</steps>
					<steps xsi:type="be.nabu.libs.services.vm.step.Link"
							disabled="false"
							id="25b5eec6586249dcb2080d38d815d39a"
							mask="false"
							optional="false"
							fixedValue="true">
						<from>true</from>
						<to>filter/active</to>
					</steps>
					<steps xsi:type="be.nabu.libs.services.vm.step.Link"
							disabled="false"
							id="59cb1279ed284136b809893d0e384198"
							mask="false"
							optional="false"
							fixedValue="false">
						<from>identifierValues</from>
						<to>filter/value</to>
					</steps>
					<steps xsi:type="be.nabu.libs.services.vm.step.Link"
							disabled="false"
							id="09d6f081b1bf411bb92aaff5a5187ea3"
							mask="false"
							optional="false"
							fixedValue="false">
						<from>potentialProcess/processId</from>
						<to>filter/processVersionId[0]</to>
					</steps>
				</steps>
				<steps xsi:type="be.nabu.libs.services.vm.step.Link"
						disabled="false"
						id="4da5fcfec1344b18be80745c2e513619"
						mask="false"
						optional="false"
						fixedValue="false">
					<from>result7ea308e4bcd14ef88d2c0d51edf21180/results</from>
					<to>matchingDataForProcess</to>
				</steps>
			</steps>
			<steps xsi:type="be.nabu.libs.services.vm.step.Map"
					disabled="false"
					id="4d227ed853894594a85c5a76de770645"
					lineNumber="27">
				<steps xsi:type="be.nabu.libs.services.vm.step.Drop"
						disabled="false"
						id="634a6732d7244459a0b02d85e8c790fe"
						path="matchingDataForProcess" xsi:nil="true"/>
			</steps>
		</steps>
		<steps xsi:type="be.nabu.libs.services.vm.step.Map"
				comment="There should be only one at this point"
				disabled="false"
				id="f13557d656594e9fb5ffca27b725e888"
				lineNumber="28">
			<steps xsi:type="be.nabu.libs.services.vm.step.Invoke"
					disabled="false"
					id="6586404267c94d69a78005a24651fb45"
					serviceId="nabu.utils.List.size"
					resultName="result08939be7f7ab4348b83a4096b4c69bb3"
					temporaryMapping="true"
					x="345"
					y="143"
					invocationOrder="1"
					asynchronous="false"
					recache="false">
				<steps xsi:type="be.nabu.libs.services.vm.step.Link"
						disabled="false"
						id="e35f99c594e146b1a63e8a137f99deb7"
						mask="false"
						optional="false"
						fixedValue="false">
					<from>resultdfc634fbd0ed4e349b025f02545d75ad/list</from>
					<to>list</to>
				</steps>
			</steps>
			<steps xsi:type="be.nabu.libs.services.vm.step.Link"
					disabled="false"
					id="e237b33fbd8f444f8dd384f33c6be5a5"
					mask="false"
					optional="false"
					fixedValue="false">
				<from>result08939be7f7ab4348b83a4096b4c69bb3/size</from>
				<to>amountOfProcessInstances</to>
			</steps>
			<steps xsi:type="be.nabu.libs.services.vm.step.Invoke"
					disabled="false"
					id="468835fa450e44df8138be17251211bb"
					serviceId="nabu.utils.List.unique"
					resultName="resultdfc634fbd0ed4e349b025f02545d75ad"
					temporaryMapping="true"
					x="37"
					y="129"
					invocationOrder="0"
					asynchronous="false"
					recache="false">
				<steps xsi:type="be.nabu.libs.services.vm.step.Link"
						disabled="false"
						id="378ce3d17fc24255baaeb0d5a7a50730"
						mask="false"
						optional="false"
						fixedValue="false">
					<from>matchingDataForProcess/processInstanceId</from>
					<to>list</to>
				</steps>
			</steps>
			<steps xsi:type="be.nabu.libs.services.vm.step.Link"
					disabled="false"
					id="6752acefc4e74821bcab550afea4cfb3"
					mask="false"
					optional="false"
					fixedValue="false">
				<from>matchingDataForProcess[0]</from>
				<to>potentialProcessInstance</to>
			</steps>
		</steps>
		<steps xsi:type="be.nabu.libs.services.vm.step.Switch"
				disabled="false"
				id="22d03a86db7641e892d8ef947fb90be5"
				lineNumber="29"
				query="amountOfProcessInstances">
			<steps xsi:type="be.nabu.libs.services.vm.step.Sequence"
					comment="We must have _an_ action that starts a new process instance or all the other actions must be lax"
					disabled="false"
					id="dc6c08abbe2e422c93f2bb4944c7a487"
					label="0"
					lineNumber="30">
				<steps xsi:type="be.nabu.libs.services.vm.step.Break"
						comment="If deprecated, we never start a new one. If a newer version exists of this process, it will pick it up (if still applicable)"
						disabled="false"
						id="19cb73dc8c5745f2ad3e50abb10d4e1e"
						label="potentialProcess/deprecated != null"
						lineNumber="31">
					<count>2</count>
					<continueExecution>true</continueExecution>
				</steps>
				<steps xsi:type="be.nabu.libs.services.vm.step.Map"
						comment="Get the process definition id"
						disabled="false"
						id="ec7519bc3ca24d57ac4e64963517b2ec"
						lineNumber="32">
					<steps xsi:type="be.nabu.libs.services.vm.step.Link"
							disabled="false"
							id="602809f28c35441b96b4b08d3d18c1bb"
							mask="false"
							optional="false"
							fixedValue="false">
						<from>potentialProcess/actions[0]/process/processDefinitionId</from>
						<to>processDefinitionId</to>
					</steps>
				</steps>
				<steps xsi:type="be.nabu.libs.services.vm.step.Break"
						comment="If already in used, we have likely activated a deprecated version, we allow it to continue without hard failing on the new version"
						disabled="false"
						id="f9fd8ada947a43b08839744aac416720"
						label="processDefinitionId # activatedProcessDefinitionIds"
						lineNumber="33">
					<count>2</count>
					<continueExecution>true</continueExecution>
				</steps>
				<steps xsi:type="be.nabu.libs.services.vm.step.Switch"
						disabled="false"
						id="3dce7520a4d44c7481ea0a4af06aa9ee"
						lineNumber="34"
						query="requireInitializer">
					<steps xsi:type="be.nabu.libs.services.vm.step.Sequence"
							disabled="false"
							id="9b8178ce43b04668ab6107d7863c9441"
							label="true"
							lineNumber="35">
						<steps xsi:type="be.nabu.libs.services.vm.step.Map"
								disabled="false"
								id="4d0381c9a0844ed6a4c9f41eb0e6f967"
								lineNumber="36">
							<steps xsi:type="be.nabu.libs.services.vm.step.Invoke"
									disabled="false"
									id="9674e0a98cbc4de0b787640e76df4384"
									serviceId="nabu.frameworks.process.providers.action.service.utils.getProcessDefinition"
									resultName="resultbf8495b1a6e34523b4bc671b0ee46f34"
									temporaryMapping="true"
									x="20"
									y="83"
									invocationOrder="0"
									asynchronous="false"
									recache="false">
								<steps xsi:type="be.nabu.libs.services.vm.step.Link"
										disabled="false"
										id="0aa09c3dcef647228e7dd9db44bd0c35"
										mask="false"
										optional="false"
										fixedValue="false">
									<from>potentialProcess/processId</from>
									<to>processVersionId</to>
								</steps>
							</steps>
							<steps xsi:type="be.nabu.libs.services.vm.step.Link"
									disabled="false"
									id="d5f191e6982140e38006f5f78298a6af"
									mask="false"
									optional="false"
									fixedValue="false">
								<from>resultbf8495b1a6e34523b4bc671b0ee46f34/definition</from>
								<to>processDefinition</to>
							</steps>
						</steps>
						<steps xsi:type="be.nabu.libs.services.vm.step.For"
								disabled="false"
								id="61264d01dde745b5b689c963c29f96e9"
								lineNumber="37"
								variable="filteredActionToCheck"
								into="triggerActions">
							<steps xsi:type="be.nabu.libs.services.vm.step.Map"
									comment="Get incoming flows"
									disabled="false"
									id="c7d71420fe3c45c69629d0edc9587afe"
									lineNumber="38">
								<steps xsi:type="be.nabu.libs.services.vm.step.Link"
										disabled="false"
										id="0213578159d242fe8da1fe946619459d"
										mask="false"
										optional="false"
										fixedValue="false">
									<from>filteredActions/relations[targetActionId == /filteredActionToCheck/id &amp;&amp; relationType == "flow"]</from>
									<to>incomingFlows</to>
								</steps>
							</steps>
							<steps xsi:type="be.nabu.libs.services.vm.step.Map"
									comment="Get initializer actions from the incoming flows"
									disabled="false"
									id="693d8fd2dc104546aef14e4600e0ae65"
									label="incomingFlows"
									lineNumber="39">
								<steps xsi:type="be.nabu.libs.services.vm.step.Link"
										disabled="false"
										id="d2160e79093d476fb3478ad4ecafecd6"
										mask="false"
										optional="false"
										fixedValue="false">
									<from>processDefinition/states/actions[actionType == "initializer" &amp;&amp; id # /incomingFlows/actionId]</from>
									<to>initializerActions</to>
								</steps>
							</steps>
							<steps xsi:type="be.nabu.libs.services.vm.step.Map"
									comment="If we have incoming initializers, add it to the trigger actions"
									disabled="false"
									id="cf633a5d934243e0aa5b0d18811423ec"
									label="initializerActions"
									lineNumber="40">
								<steps xsi:type="be.nabu.libs.services.vm.step.Link"
										disabled="false"
										id="c68a89781f334f58b89f0f4389078d11"
										mask="false"
										optional="false"
										fixedValue="false">
									<from>filteredActions</from>
									<to>triggerActions[0]</to>
								</steps>
							</steps>
							<query>filteredActions</query>
						</steps>
					</steps>
					<steps xsi:type="be.nabu.libs.services.vm.step.Sequence"
							disabled="false"
							id="166e7f77a6ae46b6a0f961f5aee8b5fe"
							lineNumber="41">
						<steps xsi:type="be.nabu.libs.services.vm.step.Map"
								comment="Get all actions in an initial state"
								disabled="false"
								id="9cd6c5dd3bde4d6b9b4eccaa91f845be"
								lineNumber="42">
							<steps xsi:type="be.nabu.libs.services.vm.step.Drop"
									disabled="false"
									id="55c61fdb71e749778c45187f3830c7f7"
									path="triggerActions" xsi:nil="true"/>
							<steps xsi:type="be.nabu.libs.services.vm.step.Link"
									disabled="false"
									id="c2c01d08b00b4109adae015dc0ae908b"
									mask="false"
									optional="false"
									fixedValue="false">
								<from>filteredActions[state/initial == true]</from>
								<to>actionsInInitialState</to>
							</steps>
						</steps>
						<steps xsi:type="be.nabu.libs.services.vm.step.For"
								disabled="false"
								id="1a8391d35df84536b9d364aba53472f5"
								lineNumber="43"
								variable="actionInInitialState"
								into="triggerActions">
							<steps xsi:type="be.nabu.libs.services.vm.step.Map"
									comment="Get incoming flows"
									disabled="false"
									id="a96d35578e6147e5bf27729ebbf6e045"
									lineNumber="44">
								<steps xsi:type="be.nabu.libs.services.vm.step.Link"
										disabled="false"
										id="00626d6c16884f43be0dce7960372738"
										mask="false"
										optional="false"
										fixedValue="false">
									<from>filteredActions/relations[targetActionId == /actionInInitialState/id &amp;&amp; relationType == "flow"]</from>
									<to>incomingFlows</to>
								</steps>
							</steps>
							<steps xsi:type="be.nabu.libs.services.vm.step.Map"
									comment="If no incoming flows, add to triggers"
									disabled="false"
									id="b18a547edceb43fb989511f474b817c7"
									label="!incomingFlows"
									lineNumber="45">
								<steps xsi:type="be.nabu.libs.services.vm.step.Link"
										disabled="false"
										id="13637ca77d7748a5844fa6452307a09f"
										mask="false"
										optional="false"
										fixedValue="false">
									<from>filteredActions</from>
									<to>triggerActions[0]</to>
								</steps>
							</steps>
							<query>actionsInInitialState</query>
						</steps>
					</steps>
				</steps>
				<steps xsi:type="be.nabu.libs.services.vm.step.Map"
						disabled="false"
						id="4ab5144ac0a44846baecd704ff6d9e24"
						lineNumber="46">
					<steps xsi:type="be.nabu.libs.services.vm.step.Invoke"
							disabled="false"
							id="3db926fc6a854e1db580640544bd333b"
							serviceId="nabu.utils.List.size"
							resultName="resultf0490963024d458c97b7f46162974a79"
							temporaryMapping="true"
							x="75"
							y="175"
							invocationOrder="0"
							asynchronous="false"
							recache="false">
						<steps xsi:type="be.nabu.libs.services.vm.step.Link"
								disabled="false"
								id="ec0efaebbcdf408cac3d87ab3254aae1"
								mask="false"
								optional="false"
								fixedValue="false">
							<from>triggerActions</from>
							<to>list</to>
						</steps>
					</steps>
					<steps xsi:type="be.nabu.libs.services.vm.step.Link"
							disabled="false"
							id="b35a603142ba461982c4354b5eb5188b"
							mask="false"
							optional="false"
							fixedValue="false">
						<from>resultf0490963024d458c97b7f46162974a79/size</from>
						<to>amountOfTriggerActions</to>
					</steps>
				</steps>
				<steps xsi:type="be.nabu.libs.services.vm.step.Switch"
						disabled="false"
						id="d17ed91b4c0d43e29a02a4d7d8f6c33a"
						lineNumber="47"
						query="amountOfTriggerActions">
					<steps xsi:type="be.nabu.libs.services.vm.step.Sequence"
							disabled="false"
							id="33bc1241e43d42c1a50bd6084b395e79"
							label="0"
							lineNumber="48">
						<steps xsi:type="be.nabu.libs.services.vm.step.Switch"
								disabled="false"
								id="aab636a8869e48f2a7e479136eeb7111"
								lineNumber="49"
								query="strictByDefault">
							<steps xsi:type="be.nabu.libs.services.vm.step.Map"
									comment="Check how many actions do NOT have lax set to true."
									disabled="false"
									id="4adabeebe6db4f459c99cce3ce154d00"
									label="true"
									lineNumber="50">
								<steps xsi:type="be.nabu.libs.services.vm.step.Invoke"
										disabled="false"
										id="b8d0dae5c8f149698161305f4a5a6691"
										serviceId="nabu.utils.List.size"
										resultName="result099fad22b757426bbb9efbe1c1f695e0"
										temporaryMapping="true"
										x="87"
										y="392"
										invocationOrder="0"
										asynchronous="false"
										recache="false">
									<steps xsi:type="be.nabu.libs.services.vm.step.Link"
											disabled="false"
											id="a16a9de4cc8745ba8d701c9a190a0950"
											mask="false"
											optional="false"
											fixedValue="false">
										<from>filteredActions[lax != true]</from>
										<to>list</to>
									</steps>
								</steps>
								<steps xsi:type="be.nabu.libs.services.vm.step.Link"
										disabled="false"
										id="5b7133d38445489f8460e6a067b0d3c6"
										mask="false"
										optional="false"
										fixedValue="false">
									<from>result099fad22b757426bbb9efbe1c1f695e0/size</from>
									<to>amountOfStrictActions</to>
								</steps>
							</steps>
							<steps xsi:type="be.nabu.libs.services.vm.step.Map"
									comment="Check how many actions have strict set"
									disabled="false"
									id="c19249acccbf4a899d43caf5bd9fd542"
									lineNumber="51">
								<steps xsi:type="be.nabu.libs.services.vm.step.Invoke"
										disabled="false"
										id="3035f056bf464e84b86e13fb80c3eaa5"
										serviceId="nabu.utils.List.size"
										resultName="result099fad22b757426bbb9efbe1c1f695e0"
										temporaryMapping="true"
										x="87"
										y="392"
										invocationOrder="0"
										asynchronous="false"
										recache="false">
									<steps xsi:type="be.nabu.libs.services.vm.step.Link"
											disabled="false"
											id="59af170bff4c4eb79eec967cc1d1ea2a"
											mask="false"
											optional="false"
											fixedValue="false">
										<from>filteredActions[strict == true]</from>
										<to>list</to>
									</steps>
								</steps>
								<steps xsi:type="be.nabu.libs.services.vm.step.Link"
										disabled="false"
										id="c247c200b8544f418ba56bf7b15fcc01"
										mask="false"
										optional="false"
										fixedValue="false">
									<from>result099fad22b757426bbb9efbe1c1f695e0/size</from>
									<to>amountOfStrictActions</to>
								</steps>
							</steps>
						</steps>
						<steps xsi:type="be.nabu.libs.services.vm.step.Throw"
								comment="If the matching is lax, it is OK"
								disabled="false"
								features="!LENIENT"
								id="9a0302e0081246bd969a33f9182dd1d5"
								label="amountOfStrictActions &gt; 0"
								lineNumber="52"
								code="PROCESS-NOT-FOUND"
								message="No active process instances found and no trigger actions" xsi:nil="true"/>
					</steps>
					<steps xsi:type="be.nabu.libs.services.vm.step.Map"
							comment="Map output"
							disabled="false"
							id="2ae23a3743424acf9ca7a9ce590b2ff2"
							label="1"
							lineNumber="53">
						<steps xsi:type="be.nabu.libs.services.vm.step.Link"
								disabled="false"
								id="8f0c4f409f8447fc8c6291d0c825f6c8"
								mask="false"
								optional="false"
								fixedValue="true">
							<from>true</from>
							<to>output/actionsToRun[0]/newProcessInstance</to>
						</steps>
						<steps xsi:type="be.nabu.libs.services.vm.step.Link"
								disabled="false"
								id="7991d5d665014a27b78ceb0c2af90db0"
								mask="false"
								optional="false"
								fixedValue="false">
							<from>potentialProcess/processId</from>
							<to>output/actionsToRun[0]/processVersionId</to>
						</steps>
						<steps xsi:type="be.nabu.libs.services.vm.step.Link"
								disabled="false"
								id="869688feb9064c108c0ad39e01d30b53"
								mask="false"
								optional="false"
								fixedValue="false">
							<from>triggerActions[0]/id</from>
							<to>output/actionsToRun[0]/processActionId</to>
						</steps>
						<steps xsi:type="be.nabu.libs.services.vm.step.Link"
								disabled="false"
								id="3152ca7537064463a55fbfaf737ebcdd"
								mask="false"
								optional="false"
								fixedValue="false">
							<from>triggerActions[0]/processStateId</from>
							<to>output/actionsToRun[0]/processStateId</to>
						</steps>
						<steps xsi:type="be.nabu.libs.services.vm.step.Link"
								disabled="false"
								id="8df9054ec5ff4f2895a3be7b31e79ca1"
								mask="false"
								optional="false"
								fixedValue="false">
							<from>triggerActions[0]/reprocessable</from>
							<to>output/actionsToRun[0]/reprocessable</to>
						</steps>
						<steps xsi:type="be.nabu.libs.services.vm.step.Link"
								disabled="false"
								id="a4f2e34993d34f7f892a25750b7d5b11"
								mask="false"
								optional="false"
								fixedValue="false">
							<from>potentialProcess/actions[0]/process/processDefinitionId</from>
							<to>output/actionsToRun[0]/processDefinitionId</to>
						</steps>
					</steps>
					<steps xsi:type="be.nabu.libs.services.vm.step.Throw"
							disabled="false"
							id="3770d08647bb48b091c9e5cefd34449a"
							lineNumber="54"
							code="PROCESS-CONFUSING-STATE"
							message="Too many trigger actions found" xsi:nil="true"/>
				</steps>
			</steps>
			<steps xsi:type="be.nabu.libs.services.vm.step.Sequence"
					comment="We find the action that matches state-wise"
					disabled="false"
					id="d3db8720f52d4ed99b933bd3133772fd"
					label="1"
					lineNumber="55">
				<steps xsi:type="be.nabu.libs.services.vm.step.Switch"
						disabled="false"
						id="970ae0f1cf5749a1b9c314485e38fac6"
						lineNumber="56">
					<steps xsi:type="be.nabu.libs.services.vm.step.Sequence"
							disabled="false"
							id="a0fdfeffca994c5ba3e34920d35bb5d3"
							label="potentialProcessInstance/processState == &quot;ERROR&quot;"
							lineNumber="57">
						<steps xsi:type="be.nabu.libs.services.vm.step.Map"
								comment="The process is in error"
								disabled="false"
								id="9984bfe17294430b9b36ab9ebb4fed5d"
								lineNumber="58">
							<steps xsi:type="be.nabu.libs.services.vm.step.Invoke"
									disabled="false"
									id="bf485d5b0fb2422f9ad9242004fb70b6"
									serviceId="nabu.utils.List.add"
									resultName="result8f0d694df4314164982d47077980bd63"
									temporaryMapping="true"
									x="131"
									y="42"
									invocationOrder="0"
									asynchronous="false"
									recache="false">
								<steps xsi:type="be.nabu.libs.services.vm.step.Link"
										disabled="false"
										id="15146eaabcc54de38f8feb85a2f4a859"
										mask="false"
										optional="false"
										fixedValue="false">
									<from>output/errorProcessInstanceIds</from>
									<to>list</to>
								</steps>
								<steps xsi:type="be.nabu.libs.services.vm.step.Link"
										disabled="false"
										id="53b79093913e443a976aefa30288c67e"
										mask="false"
										optional="false"
										fixedValue="false">
									<from>potentialProcessInstance/processInstanceId</from>
									<to>object</to>
								</steps>
							</steps>
							<steps xsi:type="be.nabu.libs.services.vm.step.Link"
									disabled="false"
									id="d250ad7ddce04c6f873fe4d2ee6ef7b6"
									mask="false"
									optional="false"
									fixedValue="false">
								<from>result8f0d694df4314164982d47077980bd63/list</from>
								<to>output/errorProcessInstanceIds</to>
							</steps>
						</steps>
						<steps xsi:type="be.nabu.libs.services.vm.step.Throw"
								description="=&quot;The process instance is currently in ERROR: &quot; + potentialProcessInstance/processInstanceId"
								disabled="true"
								id="777043430e98478b8e242eee095660cb"
								label="potentialProcessInstance/processState == &quot;ERROR&quot;"
								lineNumber="59"
								code="PROCESS-IN-ERROR"
								message="The process instance is currently in ERROR" xsi:nil="true"/>
					</steps>
					<steps xsi:type="be.nabu.libs.services.vm.step.Sequence"
							disabled="false"
							id="b7f4f1c51eb943d99482e934abcd9b87"
							lineNumber="60">
						<steps xsi:type="be.nabu.libs.services.vm.step.For"
								disabled="false"
								id="dce23007cf3b41da8e1f6655b0525a88"
								lineNumber="61"
								variable="potentialAction"
								into="matchingActions">
							<steps xsi:type="be.nabu.libs.services.vm.step.Map"
									disabled="false"
									id="b9341d6dce0540909307d6fe8404671b"
									lineNumber="62">
								<steps xsi:type="be.nabu.libs.services.vm.step.Invoke"
										disabled="false"
										id="a6ecae83a5964ecf8ca120d2cd59c558"
										serviceId="nabu.frameworks.process.providers.action.service.utils.canRunActionForProcessInstance"
										resultName="result453b95a9e16543d7ba17a316e4173d48"
										temporaryMapping="true"
										x="305"
										y="49"
										invocationOrder="0"
										asynchronous="false"
										recache="false">
									<steps xsi:type="be.nabu.libs.services.vm.step.Link"
											disabled="false"
											id="847ba33768744bd4900f4e789e8aeb50"
											mask="false"
											optional="false"
											fixedValue="false">
										<from>potentialProcessInstance/processInstanceId</from>
										<to>processInstanceId</to>
									</steps>
									<steps xsi:type="be.nabu.libs.services.vm.step.Link"
											disabled="false"
											id="6ccb547fa7d94cd4adf485ee26cacffe"
											mask="false"
											optional="false"
											fixedValue="false">
										<from>potentialProcessInstance/processVersionId</from>
										<to>processVersionId</to>
									</steps>
									<steps xsi:type="be.nabu.libs.services.vm.step.Link"
											disabled="false"
											id="a6679ae500ac4487a45982189b8a3bbf"
											mask="false"
											optional="false"
											fixedValue="false">
										<from>potentialAction/id</from>
										<to>actionId</to>
									</steps>
								</steps>
								<steps xsi:type="be.nabu.libs.services.vm.step.Link"
										disabled="false"
										id="87e7de4b3cba405e8605f4b2735c96b1"
										mask="false"
										optional="false"
										fixedValue="false">
									<from>result453b95a9e16543d7ba17a316e4173d48/allowedToProceed</from>
									<to>allowedToProceed</to>
								</steps>
								<steps xsi:type="be.nabu.libs.services.vm.step.Link"
										disabled="false"
										id="3671417be154491ba253eaef7a84485f"
										mask="false"
										optional="false"
										fixedValue="false">
									<from>result453b95a9e16543d7ba17a316e4173d48/processInError</from>
									<to>processInError</to>
								</steps>
								<steps xsi:type="be.nabu.libs.services.vm.step.Link"
										disabled="false"
										id="d70cbfa46ea94ddbb05eafa109888f0f"
										mask="false"
										optional="false"
										fixedValue="false">
									<from>result453b95a9e16543d7ba17a316e4173d48/nested</from>
									<to>potentialNested</to>
								</steps>
								<steps xsi:type="be.nabu.libs.services.vm.step.Link"
										disabled="false"
										id="dd65864a73394bb1b568690758d0e236"
										mask="false"
										optional="false"
										fixedValue="false">
									<from>result453b95a9e16543d7ba17a316e4173d48/activatedRelations</from>
									<to>activatedRelations</to>
								</steps>
							</steps>
							<steps xsi:type="be.nabu.libs.services.vm.step.Switch"
									disabled="false"
									id="7d191bf8b026406ea9884f9abd96882b"
									lineNumber="63">
								<steps xsi:type="be.nabu.libs.services.vm.step.Map"
										comment="Add it to the list"
										disabled="false"
										id="4e850687880840e9b292b95b0a8cb430"
										label="allowedToProceed"
										lineNumber="64">
									<steps xsi:type="be.nabu.libs.services.vm.step.Link"
											disabled="false"
											id="d759464d603f4eee9a0d6975c00d411b"
											mask="false"
											optional="false"
											fixedValue="false">
										<from>potentialAction</from>
										<to>matchingActions[0]</to>
									</steps>
									<steps xsi:type="be.nabu.libs.services.vm.step.Link"
											disabled="false"
											id="f47dfc69d4774bf9aa7e942762046b74"
											mask="false"
											optional="false"
											fixedValue="false">
										<from>potentialNested</from>
										<to>nested</to>
									</steps>
								</steps>
								<steps xsi:type="be.nabu.libs.services.vm.step.Sequence"
										comment="If we have a force condition, check it"
										disabled="false"
										id="cd68b4c3ce6a42a18335d7654aaa764c"
										label="input/force == true || potentialAction/forceCondition != null || potentialAction/state/force == true || potentialAction/process/force == true"
										lineNumber="65">
									<steps xsi:type="be.nabu.libs.services.vm.step.Switch"
											disabled="false"
											id="2d9bcaffa20647fc8c6c19a08ef32412"
											lineNumber="66">
										<steps xsi:type="be.nabu.libs.services.vm.step.Map"
												comment="If we have an input force boolean, we don't check the condition"
												disabled="false"
												id="4cc5a257f9f241889f4754b67bc62dc1"
												label="input/force == true"
												lineNumber="67">
											<steps xsi:type="be.nabu.libs.services.vm.step.Link"
													disabled="false"
													id="51e9e74bad9e44b48d1fee9b1a8f72d3"
													mask="false"
													optional="false"
													fixedValue="true">
												<from>true</from>
												<to>conditionResult</to>
											</steps>
										</steps>
										<steps xsi:type="be.nabu.libs.services.vm.step.Map"
												comment="If we have a condition, it always wins (true or false) over the state or process level"
												disabled="false"
												id="7f83581dfcb748a4bc46c2ead20da436"
												label="potentialAction/forceCondition != null"
												lineNumber="68">
											<steps xsi:type="be.nabu.libs.services.vm.step.Invoke"
													disabled="false"
													id="e01f84d8bc3641d38b7e16a97ca9eee2"
													serviceId="nabu.services.glue.Services.evaluate"
													resultName="result3f1e509d7bc8472ca1fe004b9ed1c1ba"
													temporaryMapping="true"
													x="103"
													y="77"
													invocationOrder="0"
													asynchronous="false"
													recache="false">
												<steps xsi:type="be.nabu.libs.services.vm.step.Link"
														disabled="false"
														id="73b050b9d4b541c58f6dfb4ae68ae9f5"
														mask="false"
														optional="false"
														fixedValue="false">
													<from>potentialAction/forceCondition</from>
													<to>rule</to>
												</steps>
												<steps xsi:type="be.nabu.libs.services.vm.step.Link"
														disabled="false"
														id="91b97992335e4400ac3bebc31a5eaa7c"
														mask="false"
														optional="false"
														fixedValue="false">
													<from>pipeline</from>
													<to>context[0]</to>
												</steps>
											</steps>
											<steps xsi:type="be.nabu.libs.services.vm.step.Link"
													disabled="false"
													id="09ea291d08624650b180d73113cddc5e"
													mask="false"
													optional="false"
													fixedValue="false">
												<from>result3f1e509d7bc8472ca1fe004b9ed1c1ba/response</from>
												<to>conditionResult</to>
											</steps>
										</steps>
										<steps xsi:type="be.nabu.libs.services.vm.step.Map"
												comment="If we have a state level true or a process level true with no specific state setting, we want condition true"
												disabled="false"
												id="ee16098d41754dbea2fa8713ca828f2f"
												label="potentialAction/state/force == true || (potentialAction/state/force == null &amp;&amp; potentialAction/process/force == true)"
												lineNumber="69">
											<steps xsi:type="be.nabu.libs.services.vm.step.Link"
													disabled="false"
													id="be5f58472ef8483f9b94e44b87fc53ba"
													mask="false"
													optional="false"
													fixedValue="true">
												<from>true</from>
												<to>conditionResult</to>
											</steps>
										</steps>
									</steps>
									<steps xsi:type="be.nabu.libs.services.vm.step.Map"
											comment="We want to force the action to proceed"
											disabled="false"
											id="99787da76f1a4cb5ba1e29acf705c581"
											label="conditionResult"
											lineNumber="70">
										<steps xsi:type="be.nabu.libs.services.vm.step.Link"
												disabled="false"
												id="931f302935954616872c9610f11041b0"
												mask="false"
												optional="false"
												fixedValue="false">
											<from>potentialAction</from>
											<to>matchingActions[0]</to>
										</steps>
										<steps xsi:type="be.nabu.libs.services.vm.step.Link"
												disabled="false"
												id="6bfdb5e59e7e4a22a8e3638292deac4e"
												mask="false"
												optional="false"
												fixedValue="false">
											<from>potentialNested</from>
											<to>nested</to>
										</steps>
										<steps xsi:type="be.nabu.libs.services.vm.step.Link"
												disabled="false"
												id="2455fc2c7a8047569dfb8ba05529f50f"
												mask="false"
												optional="false"
												fixedValue="true">
											<from>true</from>
											<to>forced</to>
										</steps>
										<steps xsi:type="be.nabu.libs.services.vm.step.Invoke"
												disabled="false"
												id="4ba3314bd07a4d4e9d68dfdc3579db36"
												serviceId="nabu.utils.Object.first"
												resultName="resultde0c27f27d1344478d6f3359a11e4681"
												temporaryMapping="true"
												x="153"
												y="92"
												invocationOrder="0"
												asynchronous="false"
												recache="false">
											<steps xsi:type="be.nabu.libs.services.vm.step.Link"
													disabled="false"
													id="79d400fec6b74235b4bbc4a5aa2b2329"
													mask="false"
													optional="false"
													fixedValue="false">
												<from>potentialAction/forceStrategy</from>
												<to>options[1]</to>
											</steps>
											<steps xsi:type="be.nabu.libs.services.vm.step.Link"
													disabled="false"
													id="f195c6d4aeaf48c6a5ac1672968e42b8"
													mask="false"
													optional="false"
													fixedValue="false">
												<from>potentialAction/state/forceStrategy</from>
												<to>options[2]</to>
											</steps>
											<steps xsi:type="be.nabu.libs.services.vm.step.Link"
													disabled="false"
													id="5bd157b8643c4e0891ed7c5f60ebae99"
													mask="false"
													optional="false"
													fixedValue="false">
												<from>potentialAction/process/forceStrategy</from>
												<to>options[3]</to>
											</steps>
											<steps xsi:type="be.nabu.libs.services.vm.step.Link"
													disabled="false"
													id="b2d668be1d244d15a9bf2e72a6b37bf0"
													mask="false"
													optional="false"
													fixedValue="false">
												<from>input/forceStrategy</from>
												<to>options[0]</to>
											</steps>
										</steps>
										<steps xsi:type="be.nabu.libs.services.vm.step.Link"
												disabled="false"
												id="b41a4acb4e9a4f06b55a1534ecda3578"
												mask="false"
												optional="false"
												fixedValue="false">
											<from>resultde0c27f27d1344478d6f3359a11e4681/first</from>
											<to>forceStrategy</to>
										</steps>
										<steps xsi:type="be.nabu.libs.services.vm.step.Invoke"
												disabled="false"
												id="090674f524ad4e53acc7e19a5087e253"
												serviceId="nabu.utils.List.add"
												resultName="resultfda2199d1ff94981a5c7b490d36025c9"
												temporaryMapping="true"
												x="321"
												y="332"
												invocationOrder="0"
												asynchronous="false"
												recache="false">
											<steps xsi:type="be.nabu.libs.services.vm.step.Link"
													disabled="false"
													id="d3d21511684248db9fa7f2612dd03371"
													mask="false"
													optional="false"
													fixedValue="false">
												<from>potentialAction/id</from>
												<to>object</to>
											</steps>
											<steps xsi:type="be.nabu.libs.services.vm.step.Link"
													disabled="false"
													id="6ce1f9a4dc9d4cf6a314970c7aeae761"
													mask="false"
													optional="false"
													fixedValue="false">
												<from>forcedMatchingActionIds</from>
												<to>list</to>
											</steps>
										</steps>
										<steps xsi:type="be.nabu.libs.services.vm.step.Link"
												disabled="false"
												id="c91341cf61ab4a4ab8d6da6138527f86"
												mask="false"
												optional="false"
												fixedValue="false">
											<from>resultfda2199d1ff94981a5c7b490d36025c9/list</from>
											<to>forcedMatchingActionIds</to>
										</steps>
									</steps>
								</steps>
							</steps>
							<query>filteredActions</query>
						</steps>
						<steps xsi:type="be.nabu.libs.services.vm.step.Map"
								disabled="false"
								id="a3285e6e4ad0437783a4845a68bd5fac"
								lineNumber="71">
							<steps xsi:type="be.nabu.libs.services.vm.step.Invoke"
									disabled="false"
									id="f62e7979b5264488b1c38c4fe433bd7e"
									serviceId="nabu.utils.List.size"
									resultName="resultac5047339dcd41c3a72e2d9412378839"
									temporaryMapping="true"
									x="59"
									y="214"
									invocationOrder="0"
									asynchronous="false"
									recache="false">
								<steps xsi:type="be.nabu.libs.services.vm.step.Link"
										disabled="false"
										id="66b5d695fe1748d5aef316099937cd49"
										mask="false"
										optional="false"
										fixedValue="false">
									<from>matchingActions</from>
									<to>list</to>
								</steps>
							</steps>
							<steps xsi:type="be.nabu.libs.services.vm.step.Link"
									disabled="false"
									id="e57815137d0f42ab92dc64cb79a9a6b0"
									mask="false"
									optional="false"
									fixedValue="false">
								<from>resultac5047339dcd41c3a72e2d9412378839/size</from>
								<to>amountOfMatchingActions</to>
							</steps>
						</steps>
						<steps xsi:type="be.nabu.libs.services.vm.step.Sequence"
								comment="If we have multiple matches, filter out the forced ones"
								disabled="false"
								id="a2368c42490a4d0284c96a2fda50a581"
								label="amountOfMatchingActions &gt;= 2"
								lineNumber="72">
							<steps xsi:type="be.nabu.libs.services.vm.step.Map"
									comment="Filter to non-forced"
									disabled="false"
									id="276a03620aae4ac8916183df50661135"
									lineNumber="73">
								<steps xsi:type="be.nabu.libs.services.vm.step.Link"
										disabled="false"
										id="3bf24d34f2d44d66a470c2dd99555dcd"
										mask="false"
										optional="false"
										fixedValue="false">
									<from>matchingActions[id !# /forcedMatchingActionIds]</from>
									<to>matchingActions</to>
								</steps>
								<steps xsi:type="be.nabu.libs.services.vm.step.Link"
										disabled="false"
										id="d6a3f2969517453d8602b3bcca37f7e2"
										mask="false"
										optional="false"
										fixedValue="true">
									<from>false</from>
									<to>forced</to>
								</steps>
							</steps>
							<steps xsi:type="be.nabu.libs.services.vm.step.Map"
									comment="Get new size"
									disabled="false"
									id="b775e18dc7674e6ebdee2430b6a5861e"
									lineNumber="74">
								<steps xsi:type="be.nabu.libs.services.vm.step.Invoke"
										disabled="false"
										id="c7b33a5ed4c74088b3623b8eb1441ae3"
										serviceId="nabu.utils.List.size"
										resultName="resultac5047339dcd41c3a72e2d9412378839"
										temporaryMapping="true"
										x="59"
										y="214"
										invocationOrder="0"
										asynchronous="false"
										recache="false">
									<steps xsi:type="be.nabu.libs.services.vm.step.Link"
											disabled="false"
											id="c3cf2631088f44fe9d3d13ae30175a73"
											mask="false"
											optional="false"
											fixedValue="false">
										<from>matchingActions</from>
										<to>list</to>
									</steps>
								</steps>
								<steps xsi:type="be.nabu.libs.services.vm.step.Link"
										disabled="false"
										id="629de43cbd8d442483758429c3916873"
										mask="false"
										optional="false"
										fixedValue="false">
									<from>resultac5047339dcd41c3a72e2d9412378839/size</from>
									<to>amountOfMatchingActions</to>
								</steps>
							</steps>
						</steps>
						<steps xsi:type="be.nabu.libs.services.vm.step.Switch"
								disabled="false"
								id="01c1600419e54689902630ee7eb79c4c"
								lineNumber="75"
								query="amountOfMatchingActions">
							<steps xsi:type="be.nabu.libs.services.vm.step.Throw"
									disabled="true"
									id="88eca6a64d82476babcde88be9fbdf53"
									label="0"
									lineNumber="76"
									code="PROCESS-INCORRECT-STATE"
									message="The process is in an incorrect state to run this service" xsi:nil="true"/>
							<steps xsi:type="be.nabu.libs.services.vm.step.Map"
									comment="The process is in an incorrect state"
									disabled="false"
									id="cdeef3a89a724201a175213855ca02be"
									label="0"
									lineNumber="77">
								<steps xsi:type="be.nabu.libs.services.vm.step.Invoke"
										disabled="false"
										id="7a561bc086484a82aa7942adc9272dec"
										serviceId="nabu.utils.List.add"
										resultName="resultc2933adbbd5a4e57a563fb6405d4f72a"
										temporaryMapping="true"
										x="69"
										y="127"
										invocationOrder="0"
										asynchronous="false"
										recache="false">
									<steps xsi:type="be.nabu.libs.services.vm.step.Link"
											disabled="false"
											id="705141f0332a499590caa410e8435ecf"
											mask="false"
											optional="false"
											fixedValue="false">
										<from>output/incorrectStateProcessInstanceIds</from>
										<to>list</to>
									</steps>
									<steps xsi:type="be.nabu.libs.services.vm.step.Link"
											disabled="false"
											id="24d02888cde24225b5fd2e1db2a8f3ef"
											mask="false"
											optional="false"
											fixedValue="false">
										<from>potentialProcessInstance/processInstanceId</from>
										<to>object</to>
									</steps>
								</steps>
								<steps xsi:type="be.nabu.libs.services.vm.step.Link"
										disabled="false"
										id="c3618fa66ce54635b078c310e2bea872"
										mask="false"
										optional="false"
										fixedValue="false">
									<from>resultc2933adbbd5a4e57a563fb6405d4f72a/list</from>
									<to>output/incorrectStateProcessInstanceIds</to>
								</steps>
							</steps>
							<steps xsi:type="be.nabu.libs.services.vm.step.Map"
									comment="If we have exactly one, we are golden"
									disabled="false"
									id="7f238d077ceb4967992683c8ed3297ca"
									label="1"
									lineNumber="78">
								<steps xsi:type="be.nabu.libs.services.vm.step.Link"
										disabled="false"
										id="ca71453f362d4eee89cd0327fcb71132"
										mask="false"
										optional="false"
										fixedValue="false">
									<from>potentialProcessInstance/processInstanceId</from>
									<to>output/actionsToRun[0]/processInstanceId</to>
								</steps>
								<steps xsi:type="be.nabu.libs.services.vm.step.Link"
										disabled="false"
										id="adc4160abc934f2fa5b254050f0a3a37"
										mask="false"
										optional="false"
										fixedValue="false">
									<from>potentialProcess/processId</from>
									<to>output/actionsToRun[0]/processVersionId</to>
								</steps>
								<steps xsi:type="be.nabu.libs.services.vm.step.Link"
										disabled="false"
										id="4d5be9f9332e4399a2cc36ede9211e75"
										mask="false"
										optional="false"
										fixedValue="false">
									<from>matchingActions[0]/id</from>
									<to>output/actionsToRun[0]/processActionId</to>
								</steps>
								<steps xsi:type="be.nabu.libs.services.vm.step.Link"
										disabled="false"
										id="888e484f527e443990143d7aabc811f0"
										mask="false"
										optional="false"
										fixedValue="false">
									<from>matchingActions[0]/processStateId</from>
									<to>output/actionsToRun[0]/processStateId</to>
								</steps>
								<steps xsi:type="be.nabu.libs.services.vm.step.Link"
										disabled="false"
										id="e856cd4919a04d8d94dd1421dc9e9d97"
										mask="false"
										optional="false"
										fixedValue="false">
									<from>matchingActions[0]/reprocessable</from>
									<to>output/actionsToRun[0]/reprocessable</to>
								</steps>
								<steps xsi:type="be.nabu.libs.services.vm.step.Link"
										disabled="false"
										id="04f644a6c05e4c65aa4f40208e7c271d"
										mask="false"
										optional="false"
										fixedValue="false">
									<from>nested</from>
									<to>output/actionsToRun[0]/nested</to>
								</steps>
								<steps xsi:type="be.nabu.libs.services.vm.step.Link"
										disabled="false"
										id="138e9d1ad6ec491ab43b5118683b684e"
										mask="false"
										optional="false"
										fixedValue="false">
									<from>matchingActions[0]/process/processDefinitionId</from>
									<to>output/actionsToRun[0]/processDefinitionId</to>
								</steps>
								<steps xsi:type="be.nabu.libs.services.vm.step.Invoke"
										disabled="false"
										id="ec4e30c579094200b7ee3b3c65d9b698"
										serviceId="nabu.utils.List.add"
										resultName="result67092c503a42496593efb6f10e1cccb4"
										temporaryMapping="true"
										x="427"
										y="312"
										invocationOrder="0"
										asynchronous="false"
										recache="false">
									<steps xsi:type="be.nabu.libs.services.vm.step.Link"
											disabled="false"
											id="008df203579a496483d387c29de4b9c0"
											mask="false"
											optional="false"
											fixedValue="false">
										<from>activatedProcessDefinitionIds</from>
										<to>list</to>
									</steps>
									<steps xsi:type="be.nabu.libs.services.vm.step.Link"
											disabled="false"
											id="a5ce5117b54e4b60a9c2c38eadcd27e8"
											mask="false"
											optional="false"
											fixedValue="false">
										<from>matchingActions[0]/process/processDefinitionId</from>
										<to>object</to>
									</steps>
								</steps>
								<steps xsi:type="be.nabu.libs.services.vm.step.Link"
										disabled="false"
										id="76f199f1173d403e8a249eb2353a407f"
										mask="false"
										optional="false"
										fixedValue="false">
									<from>result67092c503a42496593efb6f10e1cccb4/list</from>
									<to>activatedProcessDefinitionIds</to>
								</steps>
								<steps xsi:type="be.nabu.libs.services.vm.step.Link"
										disabled="false"
										id="daa6bb7de35848389b10c5d0c5f478b4"
										mask="false"
										optional="false"
										fixedValue="false">
									<from>forceStrategy</from>
									<to>output/actionsToRun[0]/forceStrategy</to>
								</steps>
								<steps xsi:type="be.nabu.libs.services.vm.step.Link"
										disabled="false"
										id="1eccbe54087745bc8f44b9818ffc8098"
										mask="false"
										optional="false"
										fixedValue="false">
									<from>forced</from>
									<to>output/actionsToRun[0]/forced</to>
								</steps>
								<steps xsi:type="be.nabu.libs.services.vm.step.Link"
										disabled="false"
										id="41984a0f98df4b17857481b1b1913834"
										mask="false"
										optional="false"
										fixedValue="false">
									<from>activatedRelations</from>
									<to>output/actionsToRun[0]/activatedRelations</to>
								</steps>
							</steps>
							<steps xsi:type="be.nabu.libs.services.vm.step.Throw"
									disabled="true"
									id="89cab2dc5e5d449692bf785e204c6a11"
									lineNumber="79"
									code="PROCESS-CONFLICTING-STATE"
									message="The process has conflicting state" xsi:nil="true"/>
							<steps xsi:type="be.nabu.libs.services.vm.step.Map"
									comment="The process has conflicting state"
									disabled="false"
									id="d40a9090bb234542a49e80c9e31e3225"
									lineNumber="80">
								<steps xsi:type="be.nabu.libs.services.vm.step.Invoke"
										disabled="false"
										id="5eb22b4b5200460686d339d0c8b1bcd9"
										serviceId="nabu.utils.List.add"
										resultName="resultc2933adbbd5a4e57a563fb6405d4f72a"
										temporaryMapping="true"
										x="69"
										y="127"
										invocationOrder="0"
										asynchronous="false"
										recache="false">
									<steps xsi:type="be.nabu.libs.services.vm.step.Link"
											disabled="false"
											id="da2704316b6a480794e42a025e1ef41d"
											mask="false"
											optional="false"
											fixedValue="false">
										<from>potentialProcessInstance/processInstanceId</from>
										<to>object</to>
									</steps>
									<steps xsi:type="be.nabu.libs.services.vm.step.Link"
											disabled="false"
											id="3a1fd2b8479d4d90add9a34fa0758209"
											mask="false"
											optional="false"
											fixedValue="false">
										<from>output/conflictingStateProcessInstanceIds</from>
										<to>list</to>
									</steps>
								</steps>
								<steps xsi:type="be.nabu.libs.services.vm.step.Link"
										disabled="false"
										id="63481f76e42c45a490df1022f25f5e26"
										mask="false"
										optional="false"
										fixedValue="false">
									<from>resultc2933adbbd5a4e57a563fb6405d4f72a/list</from>
									<to>output/conflictingStateProcessInstanceIds</to>
								</steps>
							</steps>
						</steps>
					</steps>
				</steps>
			</steps>
			<steps xsi:type="be.nabu.libs.services.vm.step.Throw"
					comment="Currently there should only be one running process instance for the combination of: service - process definition - matching identifiers"
					disabled="false"
					id="2f8ebe8ef80a407892b9d6159693ab0a"
					lineNumber="81"
					code="TOO-MANY-PROCESSES" xsi:nil="true"/>
		</steps>
		<query>potentialProcesses</query>
	</steps>
</sequence>